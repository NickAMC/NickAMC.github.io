<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nick Climaco">
<meta name="dcterms.date" content="2024-03-10">

<title>Exploratory Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="hw1_files/libs/clipboard/clipboard.min.js"></script>
<script src="hw1_files/libs/quarto-html/quarto.js"></script>
<script src="hw1_files/libs/quarto-html/popper.min.js"></script>
<script src="hw1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="hw1_files/libs/quarto-html/anchor.min.js"></script>
<link href="hw1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="hw1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="hw1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="hw1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="hw1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#instructions" id="toc-instructions" class="nav-link active" data-scroll-target="#instructions">Instructions</a></li>
  <li><a href="#essay" id="toc-essay" class="nav-link" data-scroll-target="#essay">Essay</a></li>
  <li><a href="#ea-fc-24-players-data" id="toc-ea-fc-24-players-data" class="nav-link" data-scroll-target="#ea-fc-24-players-data">EA FC 24 Players Data</a>
  <ul class="collapse">
  <li><a href="#exploratory-data-analysis-data-wrangling" id="toc-exploratory-data-analysis-data-wrangling" class="nav-link" data-scroll-target="#exploratory-data-analysis-data-wrangling">Exploratory Data Analysis / Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#distribution-of-player-statistics" id="toc-distribution-of-player-statistics" class="nav-link" data-scroll-target="#distribution-of-player-statistics">Distribution of Player Statistics</a></li>
  <li><a href="#who-are-top-10-rated-players-in-world" id="toc-who-are-top-10-rated-players-in-world" class="nav-link" data-scroll-target="#who-are-top-10-rated-players-in-world">Who are top 10 rated players in World?</a></li>
  <li><a href="#how-many-are-players-are-in-each-position" id="toc-how-many-are-players-are-in-each-position" class="nav-link" data-scroll-target="#how-many-are-players-are-in-each-position">How many are players are in each position?</a></li>
  <li><a href="#which-nation-have-the-most-players" id="toc-which-nation-have-the-most-players" class="nav-link" data-scroll-target="#which-nation-have-the-most-players">Which nation have the most players?</a></li>
  <li><a href="#overall-correlation-matrix" id="toc-overall-correlation-matrix" class="nav-link" data-scroll-target="#overall-correlation-matrix">Overall Correlation Matrix</a></li>
  <li><a href="#defense-correlation-matrix" id="toc-defense-correlation-matrix" class="nav-link" data-scroll-target="#defense-correlation-matrix">Defense Correlation Matrix</a></li>
  <li><a href="#attack-correlation-matrix" id="toc-attack-correlation-matrix" class="nav-link" data-scroll-target="#attack-correlation-matrix">Attack Correlation Matrix</a></li>
  <li><a href="#which-clubs-do-quality-players-tend-to-play-for" id="toc-which-clubs-do-quality-players-tend-to-play-for" class="nav-link" data-scroll-target="#which-clubs-do-quality-players-tend-to-play-for">Which clubs do quality players tend to play for?</a></li>
  <li><a href="#what-is-the-average-rating-of-players-per-club-in-the-premier-league" id="toc-what-is-the-average-rating-of-players-per-club-in-the-premier-league" class="nav-link" data-scroll-target="#what-is-the-average-rating-of-players-per-club-in-the-premier-league">What is the average rating of players per club in the Premier League ?</a></li>
  <li><a href="#comparative-analysis-of-player-quality-in-the-top-5-leagues" id="toc-comparative-analysis-of-player-quality-in-the-top-5-leagues" class="nav-link" data-scroll-target="#comparative-analysis-of-player-quality-in-the-top-5-leagues">Comparative Analysis of Player Quality in the Top 5 Leagues</a></li>
  </ul></li>
  <li><a href="#linear-regression" id="toc-linear-regression" class="nav-link" data-scroll-target="#linear-regression">Linear Regression</a></li>
  <li><a href="#classification" id="toc-classification" class="nav-link" data-scroll-target="#classification">Classification</a></li>
  </ul></li>
  <li><a href="#nba-players-data" id="toc-nba-players-data" class="nav-link" data-scroll-target="#nba-players-data">NBA Players Data</a>
  <ul class="collapse">
  <li><a href="#distribution-of-nba-players-statistics" id="toc-distribution-of-nba-players-statistics" class="nav-link" data-scroll-target="#distribution-of-nba-players-statistics">Distribution of NBA Players Statistics</a></li>
  <li><a href="#player-height-v-weight" id="toc-player-height-v-weight" class="nav-link" data-scroll-target="#player-height-v-weight">Player Height v Weight</a></li>
  <li><a href="#which-colleges-produce-the-most-nba-players" id="toc-which-colleges-produce-the-most-nba-players" class="nav-link" data-scroll-target="#which-colleges-produce-the-most-nba-players">Which colleges produce the most NBA players?</a></li>
  <li><a href="#regression" id="toc-regression" class="nav-link" data-scroll-target="#regression">Regression</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploratory Data Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nick Climaco </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 10, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="cell-1" class="cell" data-execution_count="518">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">import</span> kaggle</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error, mean_squared_error, mean_absolute_percentage_error</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a>pd.set_option(<span class="st">'display.max_columns'</span>, <span class="dv">30</span>)</span>
<span id="cb1-12"><a href="#cb1-12"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="instructions" class="level1">
<h1>Instructions</h1>
<p>Exploratory analysis and essay</p>
<p>Pre-work</p>
<p>Visit the following website and explore the range of sizes of this dataset (from 100 to 5 million records): https://excelbianalytics.com/wp/downloads-18-sample-csv-files-data-sets-for-testing-sales/ or (new) https://www.kaggle.com/datasets</p>
<ol type="1">
<li><p>Select 2 files to download</p></li>
<li><p>Based on your computer’s capabilities (memory, CPU), select 2 files you can handle (recommended one small, one large)</p></li>
<li><p>Download the files</p></li>
<li><p>Review the structure and content of the tables, and think about the data sets (structure, size, dependencies, labels, etc)</p></li>
<li><p>Consider the similarities and differences in the two data sets you have downloaded</p></li>
<li><p>Think about how to analyze and predict an outcome based on the datasets available</p></li>
<li><p>Based on the data you have, think which two machine learning algorithms presented so far could be used to analyze the data</p></li>
</ol>
<p>Answer questions such as:</p>
<ol type="1">
<li><p>Are the columns of your data correlated?</p></li>
<li><p>Are there labels in your data? Did that impact your choice of algorithm?</p></li>
<li><p>What are the pros and cons of each algorithm you selected?</p></li>
<li><p>How your choice of algorithm relates to the datasets (was your choice of algorithm impacted by the datasets you chose)?</p></li>
<li><p>Which result will you trust if you need to make a business decision?</p></li>
<li><p>Do you think an analysis could be prone to errors when using too much data, or when using the least amount possible?</p></li>
<li><p>How does the analysis between data sets compare?</p></li>
</ol>
<p>Develop your exploratory analysis of the data and the essay in the following 2 weeks.</p>
</section>
<section id="essay" class="level1">
<h1>Essay</h1>
<p>500 words minimum</p>
<p>For this task</p>
</section>
<section id="ea-fc-24-players-data" class="level1">
<h1>EA FC 24 Players Data</h1>
<div id="cell-8" class="cell" data-execution_count="519">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>kaggle.api.authenticate()</span>
<span id="cb2-2"><a href="#cb2-2"></a>kaggle.api.dataset_download_files(<span class="st">'lucas142129silva/fifa-23-ultimate-team-players-database'</span>, path<span class="op">=</span><span class="st">'./'</span>, unzip<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="exploratory-data-analysis-data-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-data-wrangling">Exploratory Data Analysis / Data Wrangling</h2>
<div id="cell-10" class="cell" data-execution_count="520">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'eafc24_players_2024-03-08.csv'</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="520">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Club</th>
<th data-quarto-table-cell-role="th">Nation</th>
<th data-quarto-table-cell-role="th">League</th>
<th data-quarto-table-cell-role="th">Rating</th>
<th data-quarto-table-cell-role="th">Main_Position</th>
<th data-quarto-table-cell-role="th">Alternate_Positions</th>
<th data-quarto-table-cell-role="th">Card_Version</th>
<th data-quarto-table-cell-role="th">Run_Style</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Price_Variation</th>
<th data-quarto-table-cell-role="th">Skills_Star</th>
<th data-quarto-table-cell-role="th">Weak_Foot_Star</th>
<th data-quarto-table-cell-role="th">Attack_Workrate</th>
<th data-quarto-table-cell-role="th">Defense_Workrate</th>
<th data-quarto-table-cell-role="th">Pace / Diving</th>
<th data-quarto-table-cell-role="th">Shooting / Handling</th>
<th data-quarto-table-cell-role="th">Passing / Kicking</th>
<th data-quarto-table-cell-role="th">Dribbling / Reflexes</th>
<th data-quarto-table-cell-role="th">Defense / Speed</th>
<th data-quarto-table-cell-role="th">Physical / Positioning</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">BodyType</th>
<th data-quarto-table-cell-role="th">Popularity</th>
<th data-quarto-table-cell-role="th">Base_Stats</th>
<th data-quarto-table-cell-role="th">Ingame_Stats</th>
<th data-quarto-table-cell-role="th">Gender</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Erling Haaland</td>
<td>Manchester City</td>
<td>Norway</td>
<td>Premier League</td>
<td>97</td>
<td>ST</td>
<td>CF</td>
<td>TOTY</td>
<td>Controlled Lengthy</td>
<td>12480000.0</td>
<td>0.67%</td>
<td>4</td>
<td>5</td>
<td>H</td>
<td>M</td>
<td>96.0</td>
<td>98</td>
<td>80</td>
<td>91</td>
<td>56</td>
<td>97</td>
<td>195cm | 6'5"</td>
<td>Unique (94kg)</td>
<td>1541</td>
<td>518</td>
<td>2481</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Kylian Mbappé</td>
<td>Paris SG</td>
<td>France</td>
<td>Ligue 1 Uber Eats</td>
<td>97</td>
<td>ST</td>
<td>CF,LW</td>
<td>TOTY</td>
<td>Controlled Explosive</td>
<td>0.0</td>
<td>0</td>
<td>5</td>
<td>4</td>
<td>H</td>
<td>L</td>
<td>99.0</td>
<td>96</td>
<td>88</td>
<td>97</td>
<td>47</td>
<td>88</td>
<td>182cm | 6'0"</td>
<td>Unique (75kg)</td>
<td>1549</td>
<td>515</td>
<td>2465</td>
<td>Male</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Lionel Messi</td>
<td>Inter Miami CF</td>
<td>Argentina</td>
<td>MLS</td>
<td>97</td>
<td>CF</td>
<td>CAM,RW,ST</td>
<td>TOTY</td>
<td>Mostly Explosive</td>
<td>11580000.0</td>
<td>7.72%</td>
<td>5</td>
<td>4</td>
<td>M</td>
<td>L</td>
<td>91.0</td>
<td>96</td>
<td>97</td>
<td>98</td>
<td>40</td>
<td>77</td>
<td>169cm | 5'7"</td>
<td>Messi (67kg)</td>
<td>-4705</td>
<td>499</td>
<td>2430</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Pelé</td>
<td>EA FC ICONS</td>
<td>Brazil</td>
<td>Icons</td>
<td>96</td>
<td>ST</td>
<td>CAM,CF</td>
<td>Winter Wildcard ICON</td>
<td>Mostly Explosive</td>
<td>6050000.0</td>
<td>0.92%</td>
<td>5</td>
<td>4</td>
<td>H</td>
<td>M</td>
<td>94.0</td>
<td>95</td>
<td>90</td>
<td>95</td>
<td>59</td>
<td>80</td>
<td>173cm | 5'8"</td>
<td>Unique (70kg)</td>
<td>982</td>
<td>513</td>
<td>2497</td>
<td>Male</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Kevin De Bruyne</td>
<td>Manchester City</td>
<td>Belgium</td>
<td>Premier League</td>
<td>96</td>
<td>CM</td>
<td>CAM</td>
<td>TOTY</td>
<td>Controlled</td>
<td>3500000.0</td>
<td>4.63%</td>
<td>4</td>
<td>5</td>
<td>H</td>
<td>M</td>
<td>85.0</td>
<td>93</td>
<td>98</td>
<td>92</td>
<td>80</td>
<td>84</td>
<td>181cm | 5'11"</td>
<td>Unique (75kg)</td>
<td>1306</td>
<td>532</td>
<td>2558</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21374</td>
<td>Lucie Bendová</td>
<td>Slavia Praha</td>
<td>Czech Republic</td>
<td>Ceska Liga Žen</td>
<td>52</td>
<td>CB</td>
<td>CDM</td>
<td>normal</td>
<td>Controlled</td>
<td>0.0</td>
<td>200</td>
<td>2</td>
<td>3</td>
<td>M</td>
<td>M</td>
<td>58.0</td>
<td>25</td>
<td>40</td>
<td>45</td>
<td>52</td>
<td>55</td>
<td>167cm | 5'6"</td>
<td>Short &amp; Normal (60kg)</td>
<td>643</td>
<td>275</td>
<td>1260</td>
<td>Female</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21375</td>
<td>Aleigh Gambone</td>
<td>Glasgow City FC</td>
<td>United States</td>
<td>Scottish Women's League</td>
<td>52</td>
<td>CM</td>
<td>0</td>
<td>normal</td>
<td>Controlled</td>
<td>200.0</td>
<td>0</td>
<td>4</td>
<td>4</td>
<td>H</td>
<td>M</td>
<td>60.0</td>
<td>55</td>
<td>53</td>
<td>56</td>
<td>49</td>
<td>52</td>
<td>170cm | 5'7"</td>
<td>Short &amp; Lean (60kg)</td>
<td>-1</td>
<td>325</td>
<td>1580</td>
<td>Female</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21376</td>
<td>Joy Lysser</td>
<td>FC Zürich</td>
<td>Switzerland</td>
<td>Schweizer Damen Liga</td>
<td>52</td>
<td>CM</td>
<td>0</td>
<td>normal</td>
<td>Controlled</td>
<td>200.0</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td>M</td>
<td>M</td>
<td>61.0</td>
<td>52</td>
<td>46</td>
<td>54</td>
<td>53</td>
<td>59</td>
<td>170cm | 5'7"</td>
<td>Short &amp; Lean (62kg)</td>
<td>6</td>
<td>325</td>
<td>1487</td>
<td>Female</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21377</td>
<td>Luisa Sury</td>
<td>FC Zürich</td>
<td>Switzerland</td>
<td>Schweizer Damen Liga</td>
<td>52</td>
<td>RB</td>
<td>RWB,CB</td>
<td>normal</td>
<td>Controlled</td>
<td>0.0</td>
<td>200</td>
<td>2</td>
<td>3</td>
<td>L</td>
<td>M</td>
<td>58.0</td>
<td>44</td>
<td>47</td>
<td>53</td>
<td>47</td>
<td>56</td>
<td>167cm | 5'6"</td>
<td>Short &amp; Stocky (72kg)</td>
<td>1</td>
<td>305</td>
<td>1421</td>
<td>Female</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21378</td>
<td>Soraya Wulff</td>
<td>FC Zürich</td>
<td>Switzerland</td>
<td>Schweizer Damen Liga</td>
<td>52</td>
<td>CB</td>
<td>0</td>
<td>normal</td>
<td>Controlled</td>
<td>200.0</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td>L</td>
<td>H</td>
<td>59.0</td>
<td>42</td>
<td>51</td>
<td>52</td>
<td>51</td>
<td>56</td>
<td>174cm | 5'9"</td>
<td>Avg &amp; Stocky (72kg)</td>
<td>2</td>
<td>311</td>
<td>1447</td>
<td>Female</td>
</tr>
</tbody>
</table>

<p>21379 rows × 27 columns</p>
</div>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="521">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">def</span> show_summary(df) :</span>
<span id="cb4-2"><a href="#cb4-2"></a>    </span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="bu">print</span>(<span class="dv">80</span> <span class="op">*</span> <span class="st">"+"</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="bu">print</span>(<span class="ss">f"DIMENSIONS : (</span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a>    </span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="bu">print</span>(<span class="dv">80</span> <span class="op">*</span> <span class="st">"+"</span>)</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="bu">print</span>(<span class="st">"COLUMNS: "</span>)</span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="bu">print</span>(df.columns.values)</span>
<span id="cb4-9"><a href="#cb4-9"></a>    </span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="bu">print</span>(<span class="dv">80</span> <span class="op">*</span> <span class="st">"+"</span>)</span>
<span id="cb4-11"><a href="#cb4-11"></a>    <span class="bu">print</span>(<span class="st">"DATA INFO: "</span>)</span>
<span id="cb4-12"><a href="#cb4-12"></a>    <span class="bu">print</span>(df.dtypes)</span>
<span id="cb4-13"><a href="#cb4-13"></a>    </span>
<span id="cb4-14"><a href="#cb4-14"></a>    <span class="bu">print</span>(<span class="dv">80</span> <span class="op">*</span> <span class="st">"+"</span>)</span>
<span id="cb4-15"><a href="#cb4-15"></a>    <span class="bu">print</span>(<span class="st">"MISSING VALUES:"</span>)</span>
<span id="cb4-16"><a href="#cb4-16"></a>    <span class="bu">print</span>(df.isnull().<span class="bu">sum</span>())</span>
<span id="cb4-17"><a href="#cb4-17"></a>    </span>
<span id="cb4-18"><a href="#cb4-18"></a>    <span class="bu">print</span>(<span class="dv">80</span> <span class="op">*</span> <span class="st">"+"</span>)</span>
<span id="cb4-19"><a href="#cb4-19"></a>    <span class="bu">print</span>(<span class="st">"NUMBER OF UNIQUE VALUES:"</span>)</span>
<span id="cb4-20"><a href="#cb4-20"></a>    <span class="bu">print</span>(df.nunique())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-12" class="cell" data-execution_count="522">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>show_summary(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
DIMENSIONS : (21379, 27)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
COLUMNS: 
['Name' 'Club' 'Nation' 'League' 'Rating' 'Main_Position'
 'Alternate_Positions' 'Card_Version' 'Run_Style' 'Price'
 'Price_Variation' 'Skills_Star' 'Weak_Foot_Star' 'Attack_Workrate'
 'Defense_Workrate' 'Pace / Diving' 'Shooting / Handling'
 'Passing / Kicking' 'Dribbling / Reflexes' 'Defense / Speed'
 'Physical / Positioning' 'Height' 'BodyType' 'Popularity' 'Base_Stats'
 'Ingame_Stats' 'Gender']
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
DATA INFO: 
Name                       object
Club                       object
Nation                     object
League                     object
Rating                      int64
Main_Position              object
Alternate_Positions        object
Card_Version               object
Run_Style                  object
Price                     float64
Price_Variation            object
Skills_Star                 int64
Weak_Foot_Star              int64
Attack_Workrate            object
Defense_Workrate           object
Pace / Diving             float64
Shooting / Handling         int64
Passing / Kicking           int64
Dribbling / Reflexes        int64
Defense / Speed             int64
Physical / Positioning      int64
Height                     object
BodyType                   object
Popularity                  int64
Base_Stats                  int64
Ingame_Stats                int64
Gender                     object
dtype: object
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
MISSING VALUES:
Name                      0
Club                      0
Nation                    0
League                    0
Rating                    0
Main_Position             0
Alternate_Positions       0
Card_Version              0
Run_Style                 0
Price                     0
Price_Variation           0
Skills_Star               0
Weak_Foot_Star            0
Attack_Workrate           0
Defense_Workrate          0
Pace / Diving             0
Shooting / Handling       0
Passing / Kicking         0
Dribbling / Reflexes      0
Defense / Speed           0
Physical / Positioning    0
Height                    0
BodyType                  0
Popularity                0
Base_Stats                0
Ingame_Stats              0
Gender                    0
dtype: int64
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
NUMBER OF UNIQUE VALUES:
Name                      17954
Club                        679
Nation                      157
League                       56
Rating                       51
Main_Position                15
Alternate_Positions         250
Card_Version                 88
Run_Style                     7
Price                       805
Price_Variation             801
Skills_Star                   5
Weak_Foot_Star                5
Attack_Workrate               3
Defense_Workrate              3
Pace / Diving                72
Shooting / Handling          81
Passing / Kicking            75
Dribbling / Reflexes         72
Defense / Speed              84
Physical / Positioning       68
Height                       51
BodyType                    360
Popularity                 1159
Base_Stats                  294
Ingame_Stats               1806
Gender                        2
dtype: int64</code></pre>
</div>
</div>
<section id="distribution-of-player-statistics" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-player-statistics">Distribution of Player Statistics</h3>
<div id="cell-14" class="cell" data-execution_count="523">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>df.hist()</span>
<span id="cb7-2"><a href="#cb7-2"></a>plt.tight_layout()</span>
<span id="cb7-3"><a href="#cb7-3"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><code>Price</code> and <code>Popularity</code> are exhibiting degenerate distributions consider removing features from data.</p>
<div id="cell-16" class="cell" data-execution_count="524">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>df.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="524">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Rating</td>
<td>21379.0</td>
<td>68.462229</td>
<td>8.464882</td>
<td>47.0</td>
<td>63.0</td>
<td>68.0</td>
<td>73.0</td>
<td>97.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Price</td>
<td>21379.0</td>
<td>28156.780018</td>
<td>334604.888770</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>300.0</td>
<td>14500000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Skills_Star</td>
<td>21379.0</td>
<td>2.507882</td>
<td>0.844031</td>
<td>1.0</td>
<td>2.0</td>
<td>2.0</td>
<td>3.0</td>
<td>5.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Weak_Foot_Star</td>
<td>21379.0</td>
<td>3.005052</td>
<td>0.708312</td>
<td>1.0</td>
<td>3.0</td>
<td>3.0</td>
<td>3.0</td>
<td>5.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pace / Diving</td>
<td>21379.0</td>
<td>69.693905</td>
<td>11.266075</td>
<td>27.0</td>
<td>63.0</td>
<td>70.0</td>
<td>77.0</td>
<td>99.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shooting / Handling</td>
<td>21379.0</td>
<td>56.657748</td>
<td>15.015127</td>
<td>19.0</td>
<td>47.0</td>
<td>58.0</td>
<td>67.0</td>
<td>99.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Passing / Kicking</td>
<td>21379.0</td>
<td>60.846157</td>
<td>11.062447</td>
<td>25.0</td>
<td>54.0</td>
<td>61.0</td>
<td>68.0</td>
<td>99.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Dribbling / Reflexes</td>
<td>21379.0</td>
<td>65.873193</td>
<td>10.535008</td>
<td>28.0</td>
<td>60.0</td>
<td>66.0</td>
<td>72.0</td>
<td>99.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Defense / Speed</td>
<td>21379.0</td>
<td>52.211703</td>
<td>16.973134</td>
<td>15.0</td>
<td>38.0</td>
<td>55.0</td>
<td>65.0</td>
<td>99.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Physical / Positioning</td>
<td>21379.0</td>
<td>66.679031</td>
<td>10.060156</td>
<td>29.0</td>
<td>60.0</td>
<td>67.0</td>
<td>74.0</td>
<td>99.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Popularity</td>
<td>21379.0</td>
<td>44.091117</td>
<td>694.930769</td>
<td>-74349.0</td>
<td>0.0</td>
<td>1.0</td>
<td>5.0</td>
<td>15937.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Base_Stats</td>
<td>21379.0</td>
<td>371.961738</td>
<td>48.139039</td>
<td>234.0</td>
<td>339.0</td>
<td>368.0</td>
<td>399.0</td>
<td>545.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ingame_Stats</td>
<td>21379.0</td>
<td>1654.104776</td>
<td>379.923360</td>
<td>529.0</td>
<td>1518.0</td>
<td>1701.0</td>
<td>1872.0</td>
<td>2644.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="525">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># filter df </span></span>
<span id="cb9-2"><a href="#cb9-2"></a>filtered_df <span class="op">=</span> df.query(<span class="st">'Club != "HERO" &amp; Card_Version == "normal" &amp; Gender == "Male"'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-18" class="cell" data-execution_count="526">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># removes price columns </span></span>
<span id="cb10-2"><a href="#cb10-2"></a>filtered_df.drop([<span class="st">'Price'</span>, <span class="st">'Price_Variation'</span>, <span class="st">'Gender'</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-19" class="cell" data-execution_count="527">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">4</span>, ncols<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="cf">for</span> i, col <span class="kw">in</span> <span class="bu">enumerate</span>(numeric_columns):</span>
<span id="cb11-3"><a href="#cb11-3"></a>    row <span class="op">=</span> i <span class="op">//</span> <span class="dv">3</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>    col_idx <span class="op">=</span> i <span class="op">%</span> <span class="dv">3</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>    axes[row, col_idx].boxplot(df[col], vert<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a>    axes[row, col_idx].set_title(col)</span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a>plt.tight_layout()</span>
<span id="cb11-9"><a href="#cb11-9"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="who-are-top-10-rated-players-in-world" class="level3">
<h3 class="anchored" data-anchor-id="who-are-top-10-rated-players-in-world">Who are top 10 rated players in World?</h3>
<div id="cell-21" class="cell" data-execution_count="528">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>filtered_df.sort_values(<span class="st">'Rating'</span>, ascending<span class="op">=</span><span class="va">False</span>)[[<span class="st">'Name'</span>,<span class="st">'Club'</span>, <span class="st">'Main_Position'</span>, <span class="st">'Rating'</span>]].head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="528">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Club</th>
<th data-quarto-table-cell-role="th">Main_Position</th>
<th data-quarto-table-cell-role="th">Rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">93</td>
<td>Erling Haaland</td>
<td>Manchester City</td>
<td>ST</td>
<td>91</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">95</td>
<td>Kevin De Bruyne</td>
<td>Manchester City</td>
<td>CM</td>
<td>91</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">94</td>
<td>Kylian Mbappé</td>
<td>Paris SG</td>
<td>ST</td>
<td>91</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">156</td>
<td>Lionel Messi</td>
<td>Inter Miami CF</td>
<td>CF</td>
<td>90</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">157</td>
<td>Karim Benzema</td>
<td>Al Ittihad</td>
<td>CF</td>
<td>90</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">158</td>
<td>Thibaut Courtois</td>
<td>Real Madrid</td>
<td>GK</td>
<td>90</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">159</td>
<td>Harry Kane</td>
<td>FC Bayern München</td>
<td>ST</td>
<td>90</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">160</td>
<td>Robert Lewandowski</td>
<td>FC Barcelona</td>
<td>ST</td>
<td>90</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">253</td>
<td>Neymar Jr</td>
<td>Al Hilal</td>
<td>LW</td>
<td>89</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">256</td>
<td>Casemiro</td>
<td>Manchester Utd</td>
<td>CDM</td>
<td>89</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="how-many-are-players-are-in-each-position" class="level3">
<h3 class="anchored" data-anchor-id="how-many-are-players-are-in-each-position">How many are players are in each position?</h3>
<div id="cell-23" class="cell" data-execution_count="529">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>position_counts.sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="529">
<pre><code>Main_Position
CB     3128
ST     2407
CM     2165
GK     1928
CDM    1454
RB     1094
LB     1075
CAM     970
LM      942
RM      928
RW      438
LW      392
RWB     315
LWB     284
CF      135
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-24" class="cell" data-execution_count="530">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>position_counts <span class="op">=</span> filtered_df.groupby(<span class="st">'Main_Position'</span>)[<span class="st">'Main_Position'</span>].value_counts().sort_values(ascending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>positions <span class="op">=</span> position_counts.index.get_level_values(<span class="dv">0</span>).to_list()</span>
<span id="cb15-3"><a href="#cb15-3"></a>counts <span class="op">=</span> position_counts.values</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a>plt.barh(positions, counts) </span>
<span id="cb15-6"><a href="#cb15-6"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="which-nation-have-the-most-players" class="level3">
<h3 class="anchored" data-anchor-id="which-nation-have-the-most-players">Which nation have the most players?</h3>
<div id="cell-26" class="cell" data-execution_count="531">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>filtered_df.groupby(<span class="st">'Main_Position'</span>)[<span class="st">'Rating'</span>].mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="531">
<pre><code>Main_Position
CF     70.918519
LW     67.594388
CDM    67.108666
CB     66.704604
RW     66.557078
LM     66.481953
ST     66.406730
RM     66.355603
CAM    66.330928
RB     66.276965
CM     66.203233
LB     66.110698
LWB    65.285211
RWB    65.104762
GK     64.821058
Name: Rating, dtype: float64</code></pre>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="532">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>filtered_df.groupby(<span class="st">'Nation'</span>)[<span class="st">'Nation'</span>].value_counts().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="532">
<pre><code>Nation
England        1700
Germany        1191
Argentina       998
Spain           957
France          877
               ... 
Thailand          1
South Sudan       1
Sri Lanka         1
Chad              1
Jordan            1
Name: count, Length: 157, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="overall-correlation-matrix" class="level3">
<h3 class="anchored" data-anchor-id="overall-correlation-matrix">Overall Correlation Matrix</h3>
<div id="cell-29" class="cell" data-execution_count="533">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>corr_matrix <span class="op">=</span> df[numeric_columns].corr()</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>)).copy()  </span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a>np.fill_diagonal(mask, <span class="va">False</span>) </span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a>cmap <span class="op">=</span> sns.diverging_palette(<span class="dv">220</span>, <span class="dv">10</span>, as_cmap<span class="op">=</span><span class="va">True</span>).<span class="bu">reversed</span>()</span>
<span id="cb20-8"><a href="#cb20-8"></a></span>
<span id="cb20-9"><a href="#cb20-9"></a>sns.heatmap(corr_matrix, mask<span class="op">=</span>mask, cmap<span class="op">=</span>cmap, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, center<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb20-10"><a href="#cb20-10"></a>            annot<span class="op">=</span><span class="va">True</span>, square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">.5</span>) </span>
<span id="cb20-11"><a href="#cb20-11"></a>plt.title(<span class="st">'Overall Correlation Matrix'</span>)</span>
<span id="cb20-12"><a href="#cb20-12"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="defense-correlation-matrix" class="level3">
<h3 class="anchored" data-anchor-id="defense-correlation-matrix">Defense Correlation Matrix</h3>
<div id="cell-31" class="cell" data-execution_count="534">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>defenders <span class="op">=</span> [<span class="st">'CB'</span>, <span class="st">'LB'</span>, <span class="st">'RB'</span>,<span class="st">'LWB'</span>, <span class="st">'RWB'</span>]</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>def_df <span class="op">=</span> filtered_df[filtered_df[<span class="st">'Main_Position'</span>].isin(defenders)]</span>
<span id="cb21-4"><a href="#cb21-4"></a>corr_matrix <span class="op">=</span> def_df[numeric_columns].corr()</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>)).copy()  </span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a>np.fill_diagonal(mask, <span class="va">False</span>) </span>
<span id="cb21-9"><a href="#cb21-9"></a></span>
<span id="cb21-10"><a href="#cb21-10"></a>cmap <span class="op">=</span> sns.diverging_palette(<span class="dv">220</span>, <span class="dv">10</span>, as_cmap<span class="op">=</span><span class="va">True</span>).<span class="bu">reversed</span>()</span>
<span id="cb21-11"><a href="#cb21-11"></a></span>
<span id="cb21-12"><a href="#cb21-12"></a>sns.heatmap(corr_matrix, mask<span class="op">=</span>mask, cmap<span class="op">=</span>cmap, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, center<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb21-13"><a href="#cb21-13"></a>            annot<span class="op">=</span><span class="va">True</span>, square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">.5</span>) </span>
<span id="cb21-14"><a href="#cb21-14"></a>plt.title(<span class="st">'Defenders Correlation Matrix'</span>)</span>
<span id="cb21-15"><a href="#cb21-15"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="attack-correlation-matrix" class="level3">
<h3 class="anchored" data-anchor-id="attack-correlation-matrix">Attack Correlation Matrix</h3>
<div id="cell-33" class="cell" data-execution_count="535">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>attackers <span class="op">=</span> [<span class="st">'ST'</span>,<span class="st">'CF'</span>,<span class="st">'RW'</span>,<span class="st">'LW'</span>]</span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a>att_df <span class="op">=</span> filtered_df[filtered_df[<span class="st">'Main_Position'</span>].isin(attackers)]</span>
<span id="cb22-4"><a href="#cb22-4"></a>corr_matrix <span class="op">=</span> att_df[numeric_columns].corr()</span>
<span id="cb22-5"><a href="#cb22-5"></a></span>
<span id="cb22-6"><a href="#cb22-6"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>)).copy()  </span>
<span id="cb22-7"><a href="#cb22-7"></a></span>
<span id="cb22-8"><a href="#cb22-8"></a>np.fill_diagonal(mask, <span class="va">False</span>) </span>
<span id="cb22-9"><a href="#cb22-9"></a></span>
<span id="cb22-10"><a href="#cb22-10"></a>cmap <span class="op">=</span> sns.diverging_palette(<span class="dv">220</span>, <span class="dv">10</span>, as_cmap<span class="op">=</span><span class="va">True</span>).<span class="bu">reversed</span>()</span>
<span id="cb22-11"><a href="#cb22-11"></a></span>
<span id="cb22-12"><a href="#cb22-12"></a>sns.heatmap(corr_matrix, mask<span class="op">=</span>mask, cmap<span class="op">=</span>cmap, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, center<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb22-13"><a href="#cb22-13"></a>            annot<span class="op">=</span><span class="va">True</span>, square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">.5</span>) </span>
<span id="cb22-14"><a href="#cb22-14"></a>plt.title(<span class="st">'Attackers Correlation Matrix'</span>)</span>
<span id="cb22-15"><a href="#cb22-15"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-34" class="cell" data-message="false" data-execution_count="536">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>filtered_df.drop([<span class="st">'Card_Version'</span>, <span class="st">'Alternate_Positions'</span>], axis<span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>filtered_df[<span class="st">'Weight'</span>] <span class="op">=</span> filtered_df[<span class="st">'BodyType'</span>].<span class="bu">str</span>.extract(<span class="vs">r'\((\d+)kg\)'</span>)</span>
<span id="cb23-4"><a href="#cb23-4"></a></span>
<span id="cb23-5"><a href="#cb23-5"></a>filtered_df[<span class="st">'Weight'</span>] <span class="op">=</span> filtered_df[<span class="st">'Weight'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb23-6"><a href="#cb23-6"></a></span>
<span id="cb23-7"><a href="#cb23-7"></a>filtered_df[<span class="st">'Weight'</span>] <span class="op">=</span> pd.to_numeric(filtered_df[<span class="st">'Weight'</span>])</span>
<span id="cb23-8"><a href="#cb23-8"></a></span>
<span id="cb23-9"><a href="#cb23-9"></a>filtered_df.drop(<span class="st">'BodyType'</span>, axis <span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="which-clubs-do-quality-players-tend-to-play-for" class="level3">
<h3 class="anchored" data-anchor-id="which-clubs-do-quality-players-tend-to-play-for">Which clubs do quality players tend to play for?</h3>
<p>Quality Players := 80 rating or above</p>
<div id="cell-36" class="cell" data-execution_count="537">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>club_counts <span class="op">=</span> filtered_df.query(<span class="st">'Rating &gt;= 80'</span>).groupby(<span class="st">'Club'</span>)[<span class="st">'Club'</span>].value_counts().sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">15</span>) </span>
<span id="cb24-2"><a href="#cb24-2"></a></span>
<span id="cb24-3"><a href="#cb24-3"></a>player_counts <span class="op">=</span> club_counts.values</span>
<span id="cb24-4"><a href="#cb24-4"></a>plt.barh(clubs, player_counts)</span>
<span id="cb24-5"><a href="#cb24-5"></a>plt.ylabel(<span class="st">'Club'</span>)</span>
<span id="cb24-6"><a href="#cb24-6"></a>plt.xlabel(<span class="st">'Count of Players with Rating &gt;= 80'</span>)</span>
<span id="cb24-7"><a href="#cb24-7"></a>plt.title(<span class="st">'Count of Quality Players Across Clubs'</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a>plt.gca().invert_yaxis()</span>
<span id="cb24-9"><a href="#cb24-9"></a>plt.tight_layout()</span>
<span id="cb24-10"><a href="#cb24-10"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-21-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-is-the-average-rating-of-players-per-club-in-the-premier-league" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-average-rating-of-players-per-club-in-the-premier-league">What is the average rating of players per club in the Premier League ?</h3>
<div id="cell-38" class="cell" data-execution_count="538">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a>epl <span class="op">=</span> filtered_df.query(<span class="st">'League == "Premier League"'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-39" class="cell" data-execution_count="539">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># sort by median since some clubs have more academy kids in the squad than others</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>club_stats <span class="op">=</span> epl.groupby(<span class="st">'Club'</span>)[<span class="st">'Rating'</span>].describe().sort_values(by<span class="op">=</span><span class="st">'50%'</span>,ascending<span class="op">=</span><span class="va">False</span>).T</span>
<span id="cb26-3"><a href="#cb26-3"></a></span>
<span id="cb26-4"><a href="#cb26-4"></a>sns.boxplot(data<span class="op">=</span>club_stats, orient <span class="op">=</span> <span class="st">'h'</span>)</span>
<span id="cb26-5"><a href="#cb26-5"></a>plt.xlabel(<span class="st">' Rating'</span>)  </span>
<span id="cb26-6"><a href="#cb26-6"></a>plt.ylabel(<span class="st">'Premier League Club'</span>) </span>
<span id="cb26-7"><a href="#cb26-7"></a>plt.title(<span class="st">'Summary Statistics of Player Ratings in Premier League Club'</span>)</span>
<span id="cb26-8"><a href="#cb26-8"></a></span>
<span id="cb26-9"><a href="#cb26-9"></a>plt.tight_layout()</span>
<span id="cb26-10"><a href="#cb26-10"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Here is the tabular form:</p>
<div id="cell-41" class="cell" data-execution_count="540">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>club_stats.T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="540">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Club</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Manchester Utd</td>
<td>34.0</td>
<td>76.705882</td>
<td>7.693088</td>
<td>61.0</td>
<td>72.50</td>
<td>79.0</td>
<td>81.75</td>
<td>89.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Manchester City</td>
<td>33.0</td>
<td>77.272727</td>
<td>9.500897</td>
<td>60.0</td>
<td>69.00</td>
<td>79.0</td>
<td>85.00</td>
<td>91.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arsenal</td>
<td>34.0</td>
<td>77.500000</td>
<td>6.977236</td>
<td>59.0</td>
<td>74.25</td>
<td>78.5</td>
<td>83.00</td>
<td>87.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Aston Villa</td>
<td>37.0</td>
<td>73.486486</td>
<td>8.510195</td>
<td>56.0</td>
<td>67.00</td>
<td>78.0</td>
<td>80.00</td>
<td>85.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">West Ham</td>
<td>28.0</td>
<td>75.000000</td>
<td>6.798693</td>
<td>57.0</td>
<td>76.00</td>
<td>78.0</td>
<td>79.00</td>
<td>81.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Spurs</td>
<td>36.0</td>
<td>76.750000</td>
<td>6.280923</td>
<td>60.0</td>
<td>75.00</td>
<td>77.5</td>
<td>81.00</td>
<td>87.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Liverpool</td>
<td>37.0</td>
<td>73.972973</td>
<td>10.199364</td>
<td>57.0</td>
<td>63.00</td>
<td>77.0</td>
<td>82.00</td>
<td>89.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Chelsea</td>
<td>35.0</td>
<td>75.485714</td>
<td>6.251454</td>
<td>61.0</td>
<td>73.00</td>
<td>76.0</td>
<td>79.00</td>
<td>86.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Newcastle Utd</td>
<td>34.0</td>
<td>74.794118</td>
<td>7.756832</td>
<td>54.0</td>
<td>72.00</td>
<td>75.5</td>
<td>81.00</td>
<td>86.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wolves</td>
<td>28.0</td>
<td>73.214286</td>
<td>5.533448</td>
<td>61.0</td>
<td>71.00</td>
<td>75.5</td>
<td>77.00</td>
<td>79.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fulham</td>
<td>33.0</td>
<td>71.303030</td>
<td>8.029184</td>
<td>55.0</td>
<td>67.00</td>
<td>75.0</td>
<td>76.00</td>
<td>83.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Everton</td>
<td>35.0</td>
<td>72.000000</td>
<td>7.170200</td>
<td>56.0</td>
<td>67.50</td>
<td>75.0</td>
<td>77.00</td>
<td>82.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Nott'm Forest</td>
<td>38.0</td>
<td>73.131579</td>
<td>5.178808</td>
<td>56.0</td>
<td>71.25</td>
<td>74.5</td>
<td>76.75</td>
<td>79.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Crystal Palace</td>
<td>31.0</td>
<td>71.354839</td>
<td>7.139320</td>
<td>55.0</td>
<td>67.00</td>
<td>74.0</td>
<td>76.50</td>
<td>79.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Brentford</td>
<td>31.0</td>
<td>72.000000</td>
<td>6.521758</td>
<td>60.0</td>
<td>67.50</td>
<td>74.0</td>
<td>76.50</td>
<td>82.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Brighton</td>
<td>33.0</td>
<td>71.606061</td>
<td>7.171730</td>
<td>55.0</td>
<td>69.00</td>
<td>73.0</td>
<td>77.00</td>
<td>81.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">AFC Bournemouth</td>
<td>34.0</td>
<td>73.088235</td>
<td>3.926350</td>
<td>61.0</td>
<td>72.00</td>
<td>73.0</td>
<td>75.00</td>
<td>82.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Burnley</td>
<td>36.0</td>
<td>70.916667</td>
<td>4.197789</td>
<td>61.0</td>
<td>69.00</td>
<td>72.0</td>
<td>74.00</td>
<td>77.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Sheffield Utd</td>
<td>36.0</td>
<td>69.111111</td>
<td>5.927070</td>
<td>55.0</td>
<td>67.00</td>
<td>71.0</td>
<td>74.00</td>
<td>75.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Luton Town</td>
<td>32.0</td>
<td>69.875000</td>
<td>3.471079</td>
<td>61.0</td>
<td>68.75</td>
<td>70.5</td>
<td>72.25</td>
<td>74.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="comparative-analysis-of-player-quality-in-the-top-5-leagues" class="level3">
<h3 class="anchored" data-anchor-id="comparative-analysis-of-player-quality-in-the-top-5-leagues">Comparative Analysis of Player Quality in the Top 5 Leagues</h3>
<div id="cell-43" class="cell" data-execution_count="541">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a>top_5_leagues <span class="op">=</span> [<span class="st">'Premier League'</span>, <span class="st">'Bundesliga'</span>, <span class="st">'LALIGA EA SPORTS'</span>, <span class="st">'Serie A TIM'</span>, <span class="st">'Ligue 1 Uber Eats'</span>]</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>top_league_players <span class="op">=</span> filtered_df[filtered_df[<span class="st">'League'</span>].isin(top_5_leagues)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-44" class="cell" data-execution_count="542">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># standard deviation of the player rating ins the top 5 leagues</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>top_league_players.groupby(<span class="st">'League'</span>)[<span class="st">'Rating'</span>].std()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="542">
<pre><code>League
Bundesliga           6.531758
LALIGA EA SPORTS     6.373353
Ligue 1 Uber Eats    5.799175
Premier League       7.257025
Serie A TIM          6.123019
Name: Rating, dtype: float64</code></pre>
</div>
</div>
<div id="cell-45" class="cell" data-execution_count="543">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a>sns.boxplot(x<span class="op">=</span><span class="st">'Rating'</span>, y<span class="op">=</span><span class="st">'League'</span>, data<span class="op">=</span>top_league_players)</span>
<span id="cb31-2"><a href="#cb31-2"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-27-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-46" class="cell" data-execution_count="544">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a><span class="im">import</span> pingouin <span class="im">as</span> pg</span>
<span id="cb32-2"><a href="#cb32-2"></a></span>
<span id="cb32-3"><a href="#cb32-3"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a>anova_results <span class="op">=</span> pg.anova(data <span class="op">=</span> top_league_players, dv <span class="op">=</span> <span class="st">'Rating'</span>, between <span class="op">=</span> <span class="st">'League'</span>)</span>
<span id="cb32-6"><a href="#cb32-6"></a></span>
<span id="cb32-7"><a href="#cb32-7"></a>anova_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="544">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Source</th>
<th data-quarto-table-cell-role="th">ddof1</th>
<th data-quarto-table-cell-role="th">ddof2</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">p-unc</th>
<th data-quarto-table-cell-role="th">np2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>League</td>
<td>4</td>
<td>2989</td>
<td>12.185419</td>
<td>7.922088e-10</td>
<td>0.016045</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="545">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a>pairwise_comparisons <span class="op">=</span> pg.pairwise_tests(dv<span class="op">=</span><span class="st">'Rating'</span>, between<span class="op">=</span><span class="st">'League'</span>, data<span class="op">=</span>top_league_players, padjust<span class="op">=</span><span class="st">'bonf'</span>) <span class="co"># use bonferroni correction</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>pairwise_comparisons</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="545">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Contrast</th>
<th data-quarto-table-cell-role="th">A</th>
<th data-quarto-table-cell-role="th">B</th>
<th data-quarto-table-cell-role="th">Paired</th>
<th data-quarto-table-cell-role="th">Parametric</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">dof</th>
<th data-quarto-table-cell-role="th">alternative</th>
<th data-quarto-table-cell-role="th">p-unc</th>
<th data-quarto-table-cell-role="th">p-corr</th>
<th data-quarto-table-cell-role="th">p-adjust</th>
<th data-quarto-table-cell-role="th">BF10</th>
<th data-quarto-table-cell-role="th">hedges</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>League</td>
<td>Bundesliga</td>
<td>LALIGA EA SPORTS</td>
<td>False</td>
<td>True</td>
<td>-4.201515</td>
<td>1152.597854</td>
<td>two-sided</td>
<td>2.856017e-05</td>
<td>2.856017e-04</td>
<td>bonf</td>
<td>377.622</td>
<td>-0.246398</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>League</td>
<td>Bundesliga</td>
<td>Ligue 1 Uber Eats</td>
<td>False</td>
<td>True</td>
<td>2.097641</td>
<td>1095.234972</td>
<td>two-sided</td>
<td>3.616560e-02</td>
<td>3.616560e-01</td>
<td>bonf</td>
<td>0.589</td>
<td>0.125882</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>League</td>
<td>Bundesliga</td>
<td>Premier League</td>
<td>False</td>
<td>True</td>
<td>-2.970311</td>
<td>1227.505373</td>
<td>two-sided</td>
<td>3.032829e-03</td>
<td>3.032829e-02</td>
<td>bonf</td>
<td>4.936</td>
<td>-0.167895</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>League</td>
<td>Bundesliga</td>
<td>Serie A TIM</td>
<td>False</td>
<td>True</td>
<td>-1.373069</td>
<td>1145.902598</td>
<td>two-sided</td>
<td>1.699996e-01</td>
<td>1.000000e+00</td>
<td>bonf</td>
<td>0.166</td>
<td>-0.080417</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>League</td>
<td>LALIGA EA SPORTS</td>
<td>Ligue 1 Uber Eats</td>
<td>False</td>
<td>True</td>
<td>6.588724</td>
<td>1143.874355</td>
<td>two-sided</td>
<td>6.752986e-11</td>
<td>6.752986e-10</td>
<td>bonf</td>
<td>9.318e+07</td>
<td>0.387622</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>League</td>
<td>LALIGA EA SPORTS</td>
<td>Premier League</td>
<td>False</td>
<td>True</td>
<td>1.114536</td>
<td>1275.635004</td>
<td>two-sided</td>
<td>2.652593e-01</td>
<td>1.000000e+00</td>
<td>bonf</td>
<td>0.116</td>
<td>0.061963</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>League</td>
<td>LALIGA EA SPORTS</td>
<td>Serie A TIM</td>
<td>False</td>
<td>True</td>
<td>3.014726</td>
<td>1208.575789</td>
<td>two-sided</td>
<td>2.625758e-03</td>
<td>2.625758e-02</td>
<td>bonf</td>
<td>5.648</td>
<td>0.172991</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>League</td>
<td>Ligue 1 Uber Eats</td>
<td>Premier League</td>
<td>False</td>
<td>True</td>
<td>-5.196920</td>
<td>1215.949762</td>
<td>two-sided</td>
<td>2.374437e-07</td>
<td>2.374437e-06</td>
<td>bonf</td>
<td>3.514e+04</td>
<td>-0.292320</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>League</td>
<td>Ligue 1 Uber Eats</td>
<td>Serie A TIM</td>
<td>False</td>
<td>True</td>
<td>-3.666813</td>
<td>1147.330845</td>
<td>two-sided</td>
<td>2.568395e-04</td>
<td>2.568395e-03</td>
<td>bonf</td>
<td>48.729</td>
<td>-0.215426</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>League</td>
<td>Premier League</td>
<td>Serie A TIM</td>
<td>False</td>
<td>True</td>
<td>1.758884</td>
<td>1277.779036</td>
<td>two-sided</td>
<td>7.883654e-02</td>
<td>7.883654e-01</td>
<td>bonf</td>
<td>0.289</td>
<td>0.097340</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="linear-regression" class="level2">
<h2 class="anchored" data-anchor-id="linear-regression">Linear Regression</h2>
<div id="cell-49" class="cell" data-execution_count="546">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>filtered_df <span class="op">=</span>filtered_df.drop([<span class="st">'Height'</span>, <span class="st">'Popularity'</span>, <span class="st">'Base_Stats'</span>,</span>
<span id="cb34-2"><a href="#cb34-2"></a>       <span class="st">'Ingame_Stats'</span>, <span class="st">'Weight'</span>],axis <span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-50" class="cell" data-execution_count="547">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> OneHotEncoder</span>
<span id="cb35-2"><a href="#cb35-2"></a></span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a>columns_to_encode <span class="op">=</span> [<span class="st">'Run_Style'</span>, <span class="st">'Attack_Workrate'</span>, <span class="st">'Defense_Workrate'</span>]</span>
<span id="cb35-5"><a href="#cb35-5"></a>encoder <span class="op">=</span> OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb35-6"><a href="#cb35-6"></a>encoded_data <span class="op">=</span> encoder.fit_transform(filtered_df[columns_to_encode])</span>
<span id="cb35-7"><a href="#cb35-7"></a>encoded_df <span class="op">=</span> pd.DataFrame(encoded_data.toarray(), columns<span class="op">=</span>encoder.get_feature_names_out(columns_to_encode)) </span>
<span id="cb35-8"><a href="#cb35-8"></a></span>
<span id="cb35-9"><a href="#cb35-9"></a>df2 <span class="op">=</span> filtered_df.drop(columns_to_encode, axis<span class="op">=</span><span class="dv">1</span>).join(encoded_df)</span>
<span id="cb35-10"><a href="#cb35-10"></a>df2.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-51" class="cell" data-execution_count="548">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a>X <span class="op">=</span> df2.iloc[:, <span class="dv">6</span>:]</span>
<span id="cb36-2"><a href="#cb36-2"></a>y <span class="op">=</span> df2[<span class="st">'Rating'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-52" class="cell" data-execution_count="549">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X,y, test_size <span class="op">=</span> <span class="fl">0.2</span>, random_state <span class="op">=</span> <span class="dv">1998</span>, shuffle <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-53" class="cell" data-execution_count="550">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>lm <span class="op">=</span> LinearRegression()</span>
<span id="cb38-2"><a href="#cb38-2"></a>lm.fit(X_train, y_train)</span>
<span id="cb38-3"><a href="#cb38-3"></a></span>
<span id="cb38-4"><a href="#cb38-4"></a>pred <span class="op">=</span> lm.predict(X_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-54" class="cell" data-execution_count="551">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">def</span> evaluate_model(y_test, y_pred):</span>
<span id="cb39-2"><a href="#cb39-2"></a>    metrics <span class="op">=</span> {<span class="st">'Metric'</span>: [<span class="st">'MSE'</span>, <span class="st">'RMSE'</span>, <span class="st">'MAE'</span>, <span class="st">'MAPE'</span>],</span>
<span id="cb39-3"><a href="#cb39-3"></a>               <span class="st">'Value'</span>: [mean_squared_error(y_test, y_pred),</span>
<span id="cb39-4"><a href="#cb39-4"></a>                         mean_squared_error(y_test, y_pred) <span class="op">**</span> <span class="fl">0.5</span>,</span>
<span id="cb39-5"><a href="#cb39-5"></a>                         mean_absolute_error(y_test, y_pred),</span>
<span id="cb39-6"><a href="#cb39-6"></a>                         mean_absolute_percentage_error(y_test, y_pred) <span class="op">*</span> <span class="dv">100</span>]</span>
<span id="cb39-7"><a href="#cb39-7"></a>              }</span>
<span id="cb39-8"><a href="#cb39-8"></a></span>
<span id="cb39-9"><a href="#cb39-9"></a>    results_df <span class="op">=</span> pd.DataFrame(metrics)</span>
<span id="cb39-10"><a href="#cb39-10"></a>    <span class="bu">print</span>(results_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-55" class="cell" data-execution_count="552">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a>evaluate_model(y_test, pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Metric     Value
0    MSE  9.368738
1   RMSE  3.060839
2    MAE  2.423679
3   MAPE  3.581369</code></pre>
</div>
</div>
</section>
<section id="classification" class="level2">
<h2 class="anchored" data-anchor-id="classification">Classification</h2>
<div id="cell-57" class="cell" data-execution_count="553">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>X_clf <span class="op">=</span> X.iloc[:, <span class="dv">2</span>:<span class="dv">8</span>]</span>
<span id="cb42-2"><a href="#cb42-2"></a>y_clf <span class="op">=</span> df2[<span class="st">'Main_Position'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-58" class="cell" data-execution_count="554">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb43-2"><a href="#cb43-2"></a></span>
<span id="cb43-3"><a href="#cb43-3"></a>X_clf_train, X_clf_test, y_clf_train, y_clf_test <span class="op">=</span> train_test_split(X_clf, y_clf, test_size <span class="op">=</span> <span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">1998</span>, shuffle<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-59" class="cell" data-execution_count="555">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a>rf_model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">150</span>, random_state<span class="op">=</span><span class="dv">1998</span>)</span>
<span id="cb44-2"><a href="#cb44-2"></a></span>
<span id="cb44-3"><a href="#cb44-3"></a>rf_model.fit(X_clf_train,y_clf_train)</span>
<span id="cb44-4"><a href="#cb44-4"></a></span>
<span id="cb44-5"><a href="#cb44-5"></a>clf_pred <span class="op">=</span> rf_model.predict(X_clf_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-60" class="cell" data-execution_count="556">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb45-2"><a href="#cb45-2"></a></span>
<span id="cb45-3"><a href="#cb45-3"></a>accuracy <span class="op">=</span> accuracy_score(y_clf_test, clf_pred)</span>
<span id="cb45-4"><a href="#cb45-4"></a></span>
<span id="cb45-5"><a href="#cb45-5"></a><span class="bu">print</span>(<span class="ss">f'Accuracy Score: </span><span class="sc">{</span>accuracy<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy Score: 0.6441484300666033</code></pre>
</div>
</div>
</section>
</section>
<section id="nba-players-data" class="level1">
<h1>NBA Players Data</h1>
<div id="cell-62" class="cell" data-execution_count="557">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1"></a>kaggle.api.dataset_download_files(<span class="st">'justinas/nba-players-data'</span>, path<span class="op">=</span><span class="st">'./'</span>, unzip<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-63" class="cell" data-execution_count="558">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>nba <span class="op">=</span> pd.read_csv(<span class="st">'all_seasons.csv'</span>)</span>
<span id="cb48-2"><a href="#cb48-2"></a>nba</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="558">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">player_name</th>
<th data-quarto-table-cell-role="th">team_abbreviation</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">player_height</th>
<th data-quarto-table-cell-role="th">player_weight</th>
<th data-quarto-table-cell-role="th">college</th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">draft_year</th>
<th data-quarto-table-cell-role="th">draft_round</th>
<th data-quarto-table-cell-role="th">draft_number</th>
<th data-quarto-table-cell-role="th">gp</th>
<th data-quarto-table-cell-role="th">pts</th>
<th data-quarto-table-cell-role="th">reb</th>
<th data-quarto-table-cell-role="th">ast</th>
<th data-quarto-table-cell-role="th">net_rating</th>
<th data-quarto-table-cell-role="th">oreb_pct</th>
<th data-quarto-table-cell-role="th">dreb_pct</th>
<th data-quarto-table-cell-role="th">usg_pct</th>
<th data-quarto-table-cell-role="th">ts_pct</th>
<th data-quarto-table-cell-role="th">ast_pct</th>
<th data-quarto-table-cell-role="th">season</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>Randy Livingston</td>
<td>HOU</td>
<td>22.0</td>
<td>193.04</td>
<td>94.800728</td>
<td>Louisiana State</td>
<td>USA</td>
<td>1996</td>
<td>2</td>
<td>42</td>
<td>64</td>
<td>3.9</td>
<td>1.5</td>
<td>2.4</td>
<td>0.3</td>
<td>0.042</td>
<td>0.071</td>
<td>0.169</td>
<td>0.487</td>
<td>0.248</td>
<td>1996-97</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1</td>
<td>Gaylon Nickerson</td>
<td>WAS</td>
<td>28.0</td>
<td>190.50</td>
<td>86.182480</td>
<td>Northwestern Oklahoma</td>
<td>USA</td>
<td>1994</td>
<td>2</td>
<td>34</td>
<td>4</td>
<td>3.8</td>
<td>1.3</td>
<td>0.3</td>
<td>8.9</td>
<td>0.030</td>
<td>0.111</td>
<td>0.174</td>
<td>0.497</td>
<td>0.043</td>
<td>1996-97</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2</td>
<td>George Lynch</td>
<td>VAN</td>
<td>26.0</td>
<td>203.20</td>
<td>103.418976</td>
<td>North Carolina</td>
<td>USA</td>
<td>1993</td>
<td>1</td>
<td>12</td>
<td>41</td>
<td>8.3</td>
<td>6.4</td>
<td>1.9</td>
<td>-8.2</td>
<td>0.106</td>
<td>0.185</td>
<td>0.175</td>
<td>0.512</td>
<td>0.125</td>
<td>1996-97</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>3</td>
<td>George McCloud</td>
<td>LAL</td>
<td>30.0</td>
<td>203.20</td>
<td>102.058200</td>
<td>Florida State</td>
<td>USA</td>
<td>1989</td>
<td>1</td>
<td>7</td>
<td>64</td>
<td>10.2</td>
<td>2.8</td>
<td>1.7</td>
<td>-2.7</td>
<td>0.027</td>
<td>0.111</td>
<td>0.206</td>
<td>0.527</td>
<td>0.125</td>
<td>1996-97</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4</td>
<td>George Zidek</td>
<td>DEN</td>
<td>23.0</td>
<td>213.36</td>
<td>119.748288</td>
<td>UCLA</td>
<td>USA</td>
<td>1995</td>
<td>1</td>
<td>22</td>
<td>52</td>
<td>2.8</td>
<td>1.7</td>
<td>0.3</td>
<td>-14.1</td>
<td>0.102</td>
<td>0.169</td>
<td>0.195</td>
<td>0.500</td>
<td>0.064</td>
<td>1996-97</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12839</td>
<td>12839</td>
<td>Joel Embiid</td>
<td>PHI</td>
<td>29.0</td>
<td>213.36</td>
<td>127.005760</td>
<td>Kansas</td>
<td>Cameroon</td>
<td>2014</td>
<td>1</td>
<td>3</td>
<td>66</td>
<td>33.1</td>
<td>10.2</td>
<td>4.2</td>
<td>8.8</td>
<td>0.057</td>
<td>0.243</td>
<td>0.370</td>
<td>0.655</td>
<td>0.233</td>
<td>2022-23</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12840</td>
<td>12840</td>
<td>John Butler Jr.</td>
<td>POR</td>
<td>20.0</td>
<td>213.36</td>
<td>86.182480</td>
<td>Florida State</td>
<td>USA</td>
<td>Undrafted</td>
<td>Undrafted</td>
<td>Undrafted</td>
<td>19</td>
<td>2.4</td>
<td>0.9</td>
<td>0.6</td>
<td>-16.1</td>
<td>0.012</td>
<td>0.065</td>
<td>0.102</td>
<td>0.411</td>
<td>0.066</td>
<td>2022-23</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12841</td>
<td>12841</td>
<td>John Collins</td>
<td>ATL</td>
<td>25.0</td>
<td>205.74</td>
<td>102.511792</td>
<td>Wake Forest</td>
<td>USA</td>
<td>2017</td>
<td>1</td>
<td>19</td>
<td>71</td>
<td>13.1</td>
<td>6.5</td>
<td>1.2</td>
<td>-0.2</td>
<td>0.035</td>
<td>0.180</td>
<td>0.168</td>
<td>0.593</td>
<td>0.052</td>
<td>2022-23</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12842</td>
<td>12842</td>
<td>Jericho Sims</td>
<td>NYK</td>
<td>24.0</td>
<td>208.28</td>
<td>113.398000</td>
<td>Texas</td>
<td>USA</td>
<td>2021</td>
<td>2</td>
<td>58</td>
<td>52</td>
<td>3.4</td>
<td>4.7</td>
<td>0.5</td>
<td>-6.7</td>
<td>0.117</td>
<td>0.175</td>
<td>0.074</td>
<td>0.780</td>
<td>0.044</td>
<td>2022-23</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12843</td>
<td>12843</td>
<td>JaMychal Green</td>
<td>GSW</td>
<td>33.0</td>
<td>205.74</td>
<td>102.965384</td>
<td>Alabama</td>
<td>USA</td>
<td>Undrafted</td>
<td>Undrafted</td>
<td>Undrafted</td>
<td>57</td>
<td>6.4</td>
<td>3.6</td>
<td>0.9</td>
<td>-8.2</td>
<td>0.087</td>
<td>0.164</td>
<td>0.169</td>
<td>0.650</td>
<td>0.094</td>
<td>2022-23</td>
</tr>
</tbody>
</table>

<p>12844 rows × 22 columns</p>
</div>
</div>
</div>
<div id="cell-64" class="cell" data-execution_count="559">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a>show_summary(nba)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
DIMENSIONS : (12844, 22)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
COLUMNS: 
['Unnamed: 0' 'player_name' 'team_abbreviation' 'age' 'player_height'
 'player_weight' 'college' 'country' 'draft_year' 'draft_round'
 'draft_number' 'gp' 'pts' 'reb' 'ast' 'net_rating' 'oreb_pct' 'dreb_pct'
 'usg_pct' 'ts_pct' 'ast_pct' 'season']
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
DATA INFO: 
Unnamed: 0             int64
player_name           object
team_abbreviation     object
age                  float64
player_height        float64
player_weight        float64
college               object
country               object
draft_year            object
draft_round           object
draft_number          object
gp                     int64
pts                  float64
reb                  float64
ast                  float64
net_rating           float64
oreb_pct             float64
dreb_pct             float64
usg_pct              float64
ts_pct               float64
ast_pct              float64
season                object
dtype: object
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
MISSING VALUES:
Unnamed: 0              0
player_name             0
team_abbreviation       0
age                     0
player_height           0
player_weight           0
college              1854
country                 0
draft_year              0
draft_round             0
draft_number            0
gp                      0
pts                     0
reb                     0
ast                     0
net_rating              0
oreb_pct                0
dreb_pct                0
usg_pct                 0
ts_pct                  0
ast_pct                 0
season                  0
dtype: int64
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
NUMBER OF UNIQUE VALUES:
Unnamed: 0           12844
player_name           2551
team_abbreviation       36
age                     27
player_height           30
player_weight          157
college                356
country                 82
draft_year              48
draft_round              9
draft_number            76
gp                      85
pts                    319
reb                    153
ast                    115
net_rating             772
oreb_pct               216
dreb_pct               352
usg_pct                348
ts_pct                 563
ast_pct                483
season                  27
dtype: int64</code></pre>
</div>
</div>
<section id="distribution-of-nba-players-statistics" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-nba-players-statistics">Distribution of NBA Players Statistics</h2>
<div id="cell-66" class="cell" data-execution_count="560">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>nba.hist()</span>
<span id="cb51-2"><a href="#cb51-2"></a>plt.tight_layout()</span>
<span id="cb51-3"><a href="#cb51-3"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-44-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="player-height-v-weight" class="level2">
<h2 class="anchored" data-anchor-id="player-height-v-weight">Player Height v Weight</h2>
<div id="cell-68" class="cell" data-execution_count="561">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a>sns.relplot(x <span class="op">=</span>nba[<span class="st">'player_height'</span>], y <span class="op">=</span> nba[<span class="st">'player_weight'</span>], kind <span class="op">=</span> <span class="st">'scatter'</span>)</span>
<span id="cb52-2"><a href="#cb52-2"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-45-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="which-colleges-produce-the-most-nba-players" class="level2">
<h2 class="anchored" data-anchor-id="which-colleges-produce-the-most-nba-players">Which colleges produce the most NBA players?</h2>
<div id="cell-70" class="cell" data-execution_count="563">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a>nba_college_count <span class="op">=</span> nba.groupby(<span class="st">'college'</span>)[<span class="st">'college'</span>].value_counts().sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span>
<span id="cb53-2"><a href="#cb53-2"></a></span>
<span id="cb53-3"><a href="#cb53-3"></a>colleges <span class="op">=</span> nba_college_count.index.get_level_values(<span class="dv">0</span>).to_list()</span>
<span id="cb53-4"><a href="#cb53-4"></a>counts <span class="op">=</span> nba_college_count.values</span>
<span id="cb53-5"><a href="#cb53-5"></a></span>
<span id="cb53-6"><a href="#cb53-6"></a>plt.barh(colleges, counts) </span>
<span id="cb53-7"><a href="#cb53-7"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-46-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-72" class="cell" data-execution_count="567">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1"></a>nba <span class="op">=</span> nba.iloc[:, <span class="dv">1</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-73" class="cell" data-execution_count="570">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a>numerics <span class="op">=</span> nba.select_dtypes(include<span class="op">=</span>np.number)</span>
<span id="cb55-2"><a href="#cb55-2"></a>corr_matrix <span class="op">=</span> numerics.corr()</span>
<span id="cb55-3"><a href="#cb55-3"></a>corr_matrix <span class="op">=</span> corr_matrix.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb55-4"><a href="#cb55-4"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>)).copy()  </span>
<span id="cb55-5"><a href="#cb55-5"></a></span>
<span id="cb55-6"><a href="#cb55-6"></a>np.fill_diagonal(mask, <span class="va">False</span>) </span>
<span id="cb55-7"><a href="#cb55-7"></a></span>
<span id="cb55-8"><a href="#cb55-8"></a>cmap <span class="op">=</span> sns.diverging_palette(<span class="dv">220</span>, <span class="dv">10</span>, as_cmap<span class="op">=</span><span class="va">True</span>).<span class="bu">reversed</span>()</span>
<span id="cb55-9"><a href="#cb55-9"></a></span>
<span id="cb55-10"><a href="#cb55-10"></a>sns.heatmap(corr_matrix, mask<span class="op">=</span>mask, cmap<span class="op">=</span>cmap, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, center<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb55-11"><a href="#cb55-11"></a>            annot<span class="op">=</span><span class="va">True</span>, square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">.5</span>) </span>
<span id="cb55-12"><a href="#cb55-12"></a>plt.title(<span class="st">'Overall Correlation Matrix'</span>)</span>
<span id="cb55-13"><a href="#cb55-13"></a></span>
<span id="cb55-14"><a href="#cb55-14"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hw1_files/figure-html/cell-48-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="regression" class="level2">
<h2 class="anchored" data-anchor-id="regression">Regression</h2>
<div id="cell-75" class="cell" data-execution_count="576">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1"></a><span class="co"># predict the average points </span></span>
<span id="cb56-2"><a href="#cb56-2"></a></span>
<span id="cb56-3"><a href="#cb56-3"></a>X <span class="op">=</span> numerics.drop(<span class="st">'pts'</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-76" class="cell" data-execution_count="577">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a>y <span class="op">=</span> numerics[<span class="st">'pts'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-77" class="cell" data-execution_count="579">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X,y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">1998</span>, shuffle<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-78" class="cell" data-execution_count="580">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb59-2"><a href="#cb59-2"></a>model.fit(X_train,y_train)</span>
<span id="cb59-3"><a href="#cb59-3"></a>pred <span class="op">=</span> model.predict(X_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-79" class="cell" data-execution_count="581">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a>evaluate_model(y_test, pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Metric         Value
0    MSE  4.909276e+00
1   RMSE  2.215689e+00
2    MAE  1.419333e+00
3   MAPE  3.647905e+16</code></pre>
</div>
</div>
<div id="cell-80" class="cell" data-execution_count="586">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># KKN approach</span></span>
<span id="cb62-2"><a href="#cb62-2"></a></span>
<span id="cb62-3"><a href="#cb62-3"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsRegressor</span>
<span id="cb62-4"><a href="#cb62-4"></a></span>
<span id="cb62-5"><a href="#cb62-5"></a>knn_model <span class="op">=</span> KNeighborsRegressor(n_neighbors <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb62-6"><a href="#cb62-6"></a>knn_model.fit(X_train, y_train) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="586">
<style>#sk-container-id-3 {color: black;}#sk-container-id-3 pre{padding: 0;}#sk-container-id-3 div.sk-toggleable {background-color: white;}#sk-container-id-3 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-3 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-3 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-3 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-3 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-3 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-3 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-3 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-3 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-3 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-3 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-3 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-3 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-3 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-3 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-3 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-3 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-3 div.sk-item {position: relative;z-index: 1;}#sk-container-id-3 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-3 div.sk-item::before, #sk-container-id-3 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-3 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-3 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-3 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-3 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-3 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-3 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-3 div.sk-label-container {text-align: center;}#sk-container-id-3 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-3 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-3" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>KNeighborsRegressor()</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-3" type="checkbox" checked=""><label for="sk-estimator-id-3" class="sk-toggleable__label sk-toggleable__label-arrow">KNeighborsRegressor</label><div class="sk-toggleable__content"><pre>KNeighborsRegressor()</pre></div></div></div></div></div>
</div>
</div>
<div id="cell-81" class="cell" data-execution_count="585">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1"></a>knn_pred <span class="op">=</span> knn_model.predict(X_test)</span>
<span id="cb63-2"><a href="#cb63-2"></a></span>
<span id="cb63-3"><a href="#cb63-3"></a>evaluate_model(y_test, knn_pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Metric         Value
0    MSE  1.690545e+01
1   RMSE  4.111624e+00
2    MAE  2.973939e+00
3   MAPE  1.250221e+16</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>